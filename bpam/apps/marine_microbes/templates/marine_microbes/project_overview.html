{% extends "base_project_overview.html" %}

{% block title %}Marine Microbes Project Overview{% endblock %}

{% load static from staticfiles %}

{% load django_bootstrap_breadcrumbs %}
{% block breadcrumbs %}
{{ block.super }}
{% breadcrumb "Marine Microbes" "marine_microbes:index" %}
{% breadcrumb "Marine Microbes Project Overview" "" %}
{% endblock %}

{% block extra_head %}
{{ block.super }}

<script>
  var PO_CONF = {
    project_name: 'marine_microbes',
    project_overview_count_url: '{% url "ckan:mm_project_overview_count" %}',
    urls: {
      'mm-metagenomics': "{% url 'ckan:package_list' 'bpa-marine-microbes' 'mm-metagenomics' %}",
      'mm-metatranscriptome': "{% url 'ckan:package_list' 'bpa-marine-microbes' 'mm-metatranscriptome' %}",
      'amplicons.16s': ampliconURL('16s'),
      'amplicons.a16s': ampliconURL('a16s'),
      'amplicons.18s': ampliconURL('18s')
    },
    top_level_nodes: [
      ['Metagenomics', 'mm-metagenomics'],
      ['Metatranscriptomics', 'mm-metatranscriptome'],
      ['Amplicon 16S', 'amplicons.16s'],
      ['Amplicon A16S', 'amplicons.a16s'],
      ['Amplicon 18S', 'amplicons.18s']
    ]
  };

  function ampliconURL(ampliconType) {
    var ampliconBaseURL = "{% url 'ckan:package_list' 'bpa-marine-microbes' 'mm-genomics-amplicon' %}";
    return _.trimEnd(ampliconBaseURL, '/') + '?amplicon=' + ampliconType;
  }

</script>

{% endblock %}
